name: Repo Sync
// https://github.com/marketplace/actions/github-repo-sync

on:
  schedule:
  - cron:  "0 0 * * 0" # every sunday at 12AM
  workflow_dispatch:

jobs:
  repo-sync:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        persist-credentials: false
    - name: repo-sync
      uses: repo-sync/github-sync@v2
      with:
        source_repo: "https://github.com/aws/amazon-cloudwatch-agent.git"
        source_branch: "master"
        destination_branch: "repo-sync"
        github_token: ${{ secrets.REPO_SYNC_PAT }}