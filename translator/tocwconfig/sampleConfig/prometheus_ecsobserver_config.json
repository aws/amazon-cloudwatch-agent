{
  "agent": {
    "region": "us-west-2"
  },
  "metrics": {
    "metrics_collected": {
      "prometheus": {
        "prometheus_config_path": "{prometheusFileName}",
        "ecs_service_discovery": {
          "sd_frequency": "1m",
          "sd_target_cluster": "my-ecs-cluster",
          "sd_cluster_region": "us-west-2",
          "sd_result_file": "{ecsSdFileName}",
          "docker_label": {
            "sd_port_label": "ECS_PROMETHEUS_EXPORTER_PORT",
            "sd_metrics_path_label": "ECS_PROMETHEUS_METRICS_PATH",
            "sd_job_name_label": "ECS_PROMETHEUS_JOB_NAME"
          },
          "task_definition_list": [
            {
              "sd_job_name": "java-prometheus",
              "sd_metrics_path": "/metrics",
              "sd_metrics_ports": "9404;9406",
              "sd_task_definition_arn_pattern": ".*:task-definition/.*javajmx.*:[0-9]+",
              "sd_container_name_pattern": "^java-app$"
            }
          ],
          "service_name_list_for_tasks": [
            {
              "sd_job_name": "nginx-prometheus",
              "sd_metrics_path": "/metrics",
              "sd_metrics_ports": "9113",
              "sd_service_name_pattern": "^nginx-.*"
            }
          ]
        }
      }
    }
  }
}